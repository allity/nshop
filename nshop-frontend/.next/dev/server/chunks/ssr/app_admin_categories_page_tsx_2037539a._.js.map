{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/inhwan/Documents/nshop/nshop-frontend/app/admin/categories/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from \"react\";\nimport Link from 'next/link';\n\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL!;\n\ntype Category = {\n    cid: number;\n    name: string;\n    sortOrder: number;\n    createdAt: string;\n}\n\nexport default function AdminCategoriesPage() {\n    const [categories, setCategories] = useState<Category[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState<string | null>(null);\n\n    const fetchCategories = async () => {\n        setLoading(true);\n        setError(null);\n        try {\n            const res = await fetch(`${API_BASE_URL}/categories`);\n            console.log(res);\n            if (!res.ok) throw new Error('카테고리 목록 조회에 실패했습니다.');\n            const data: Category[] = await res.json();\n            setCategories(data);\n        } catch(e: any) {\n            setError(e.message ?? '카테고리 조회 중 오류가 발생했습니다.');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        fetchCategories();\n    }, []);\n\n    const formatDate = (iso: string) => {\n        const d = new Date(iso);\n        if (Number.isNaN(d.getTime())) return iso;\n        return d.toLocaleString('ko-KR', {\n            year: 'numeric',\n            month: '2-digit',\n            day: '2-digit',\n        });\n    };\n\n    const handleDelete = async (cid: number, name: string) => {\n        const ok = window.confirm(`${name} 분류를 정말 삭제할까요?`);\n        if (!ok) return;\n\n        try {\n            const res = await fetch(`${API_BASE_URL}/categories/${cid}`, {\n                method: 'DELETE',\n            });\n            if (!res.ok) {\n                const text = await res.text();\n                console.log('Delete category failed:', text);\n                alert('카테고리 삭제에 실패했습니다.');\n                return;\n            }\n            await fetchCategories();\n        } catch (e) {\n            console.error(e);\n            alert('카테고리 삭제 중 오류가 발생했습니다.');\n        }\n    };\n\n    return (\n        <div className=\"space-y-6\">\n            <div className=\"flex items-center justify-between\">\n                <div>\n                    <h2 className=\"text-lg font-semibold\">상품분류 관리</h2>\n                    <p className=\"text-xs text-slate-500\">\n                        쇼핑몰 상단/좌측에 노출될 상품 분류를 관리합니다.\n                    </p>\n                </div>\n                <Link\n                    href=\"/admin/categories/new\"\n                    className=\"rounded-full bg-indigo-600 px-4 py-2 text-xs font-medium text-white hover:bg-indigo-700\"\n                >\n                    + 분류 등록\n                </Link>\n            </div>\n\n            <section className=\"bg-white rounded-2xl shadow-sm border border-slate-100 p-4\">\n                {loading ? (\n                    <div className=\"py-10 text-center text-sm text-slate-500\">\n                        불러오는 중입니다...\n                    </div>\n                ) : categories.length === 0 ? (\n                    <div className=\"py-10 text-center text-sm text-slate-500\">\n                        등록된 상품분류가 없습니다.\n                    </div>\n                ) : (\n                    <>\n                        <table className=\"min-w-full text-xs\">\n                            <thead>\n                                <tr className=\"border-b border-slate-200 bg-slate-50\">\n                                    <th className=\"px-3 py-2 text-left font-medium text-slate-600\">분류번호</th>\n                                    <th className=\"px-3 py-2 text-left font-medium text-slate-600\">분류명</th>\n                                    <th className=\"px-3 py-2 text-right font-medium text-slate-600\">노출순서</th>\n                                    <th className=\"px-3 py-2 text-left font-medium text-slate-600\">등록일</th>\n                                    <th className=\"px-3 py-2 text-center font-medium text-slate-600\">액션</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {categories.map((c) => (\n                                    <tr key={c.cid} className=\"border-b border-slate-100 hover:bg-slate-50\">\n                                        <td className=\"px-3 py-2 font-mono text-[11px] text-slate-700\">\n                                            {c.cid}\n                                        </td>\n                                        <td className=\"px-3 py-2 text-slate-800\">\n                                            {c.name}\n                                        </td>\n                                        <td className=\"px-3 py-2 text-right text-slate-800\">\n                                            {c.sortOrder}\n                                        </td>\n                                        <td className=\"px-3 py-2 text-left text-slate-600\">\n                                            {formatDate(c.createdAt)}\n                                        </td>\n                                        <td className=\"px-3 py-2 text-center\">\n                                            <div className=\"inline-flex gap-1\">\n                                                <Link\n                                                    href={`/admin/categories/${c.cid}/edit`}\n                                                    className=\"rounded-full border border-indigo-500 px-3 py-1 text-[11px] text-indigo-600 hover:bg-indigo-50\"\n                                                >\n                                                    수정\n                                                </Link>\n                                                <button\n                                                    type=\"button\"\n                                                    onClick={() => handleDelete(c.cid, c.name)}\n                                                    className=\"rounded-full border border-rose-400 px-3 py-1 text-[11px] text-rose-600 hover:bg-rose-50\"\n                                                >\n                                                    삭제\n                                                </button>\n                                            </div>\n                                        </td>\n                                    </tr>\n                                ))}\n                            </tbody>\n                        </table>\n                    </>\n                )}\n\n                {error && (\n                    <p className=\"mt-2 text-xs text-rose-600\">\n                        {error}\n                    </p>\n                )}\n            </section>\n        </div>\n    );\n}"],"names":[],"mappings":"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"}}]
}